kube-prometheus-stack:
  grafana:
    enabled: false

  # Disabled since we're using cortexs
  alertmanager:
    enabled: false

  prometheus:
    enabled: true

    ## ref: https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#prometheusspec
    prometheusSpec:

      # This is set from 10d to 2h because, Cause we should remote-write to cortex, and shouldn't need a large retention on prometheus itself
      retention: 2h

      remoteWrite:
        - url: http://cortex-distributor:8080/api/v1/push

      resources:
        requests:
          cpu: 100m
          memory: 500Mi
        limits:
          cpu: 200m
          memory: 1Gi

  prometheusOperator:
    admissionWebhooks:
      patch:
        resources:
          limits:
            cpu: 100m
            memory: 50Mi
    resources:
      requests:
        cpu: 100m
        memory: 100Mi
      limits:
        cpu: 200m
        memory: 200Mi

  kube-state-metrics:
    resources:
      requests:
        cpu: 10m
        memory: 32Mi
      limits:
        cpu: 100m
        memory: 64Mi
  prometheus-node-exporter:
    resources:
      requests:
        cpu: 100m
        memory: 30Mi
      limits:
        cpu: 200m
        memory: 50Mi
